# Silence the FQDN warning
ServerName localhost

<VirtualHost *:8080>
    ServerAdmin admin@example.com

    # ---------- Static files ----------
    DocumentRoot /app/www
    <Directory /app/www>
        Options -Indexes +FollowSymLinks
        AllowOverride None
        Require all granted
        DirectoryIndex index.html index.htm
    </Directory>

    # ---------- CGI (Perl) ----------
    # Use Debian's system CGI directory for least-permission friction
    ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
    <Directory "/usr/lib/cgi-bin">
        Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
        AllowOverride None
        Require all granted
        AddHandler cgi-script .cgi .pl
        SetHandler cgi-script
    </Directory>

    # ---------- Logging (Render reads these) ----------
    ErrorLog  /dev/stderr
    CustomLog /dev/stdout combined
</VirtualHost>